<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title>Dot Weight Font (Blob 2.0) + Multiline + SVG Export</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      padding: 20px;
      line-height: 1.6;
    }
    #grid {
      position: relative;
      display: inline-block;
      margin-top: 20px;
      border: 1px dashed #ccc;
      background: #f9f9f9;
    }
    .dot {
      position: absolute;
      border-radius: 50%;
      background: black;
      transform: translate(-50%, -50%);
    }
    label {
      font-weight: 600;
      display: block;
      margin-top: 14px;
    }
    textarea#textInput {
      width: 320px;
      height: 100px;
      padding: 8px;
      font-size: 16px;
      font-family: inherit;
      white-space: pre;
      box-sizing: border-box;
    }
    #svgCode {
      width: 100%;
      height: 200px;
      margin-top: 16px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      box-sizing: border-box;
    }
    button {
      margin-top: 14px;
      padding: 8px 16px;
      font-size: 14px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h1>Dot Weight Font (0 → 2.0 Blob) + Multiline + SVG Export</h1>

<label>
  텍스트 입력 (엔터로 줄바꿈 가능):
  <textarea id="textInput">HELLO
WORLD</textarea>
</label>

<label>
  Weight (0 → 2.0):
  <input id="weightSlider" type="range" min="0" max="2" step="0.01" value="0.3">
  <span id="weightLabel">0.30</span>
</label>

<label>
  Letter Spacing (px):
  <input id="spacingSlider" type="range" min="0" max="100" step="1" value="20">
  <span id="spacingLabel">20px</span>
</label>

<button id="exportSvgBtn">SVG로 내보내기</button>

<div id="grid"></div>

<textarea id="svgCode" placeholder="여기에 SVG 코드가 표시됩니다."></textarea>

<script>
  /* ========== 5×7 DOT FONT (A~Z) ========== */
  const glyphs = {
    "A":[ "01110","10001","10001","11111","10001","10001","10001" ],
    "B":[ "11110","10001","10001","11110","10001","10001","11110" ],
    "C":[ "01110","10001","10000","10000","10000","10001","01110" ],
    "D":[ "11100","10010","10001","10001","10001","10010","11100" ],
    "E":[ "11111","10000","10000","11110","10000","10000","11111" ],
    "F":[ "11111","10000","10000","11110","10000","10000","10000" ],
    "G":[ "01110","10001","10000","10111","10001","10001","01110" ],
    "H":[ "10001","10001","10001","11111","10001","10001","10001" ],
    "I":[ "01110","00100","00100","00100","00100","00100","01110" ],
    "J":[ "00111","00010","00010","00010","10010","10010","01100" ],
    "K":[ "10001","10010","10100","11000","10100","10010","10001" ],
    "L":[ "10000","10000","10000","10000","10000","10000","11111" ],
    "M":[ "10001","11011","10101","10001","10001","10001","10001" ],
    "N":[ "10001","11001","10101","10011","10001","10001","10001" ],
    "O":[ "01110","10001","10001","10001","10001","10001","01110" ],
    "P":[ "11110","10001","10001","11110","10000","10000","10000" ],
    "Q":[ "01110","10001","10001","10001","10101","10010","01101" ],
    "R":[ "11110","10001","10001","11110","10100","10010","10001" ],
    "S":[ "01111","10000","10000","01110","00001","00001","11110" ],
    "T":[ "11111","00100","00100","00100","00100","00100","00100" ],
    "U":[ "10001","10001","10001","10001","10001","10001","01110" ],
    "V":[ "10001","10001","10001","10001","10001","01010","00100" ],
    "W":[ "10001","10001","10001","10001","10101","11011","10001" ],
    "X":[ "10001","01010","00100","00100","00100","01010","10001" ],
    "Y":[ "10001","01010","00100","00100","00100","00100","00100" ],
    "Z":[ "11111","00001","00010","00100","01000","10000","11111" ]
  };

  /* ========== SETTINGS ========== */
  const cols = 5;
  const rows = 7;
  const cellSize = 40;

  const minR = 4;          // weight=0
  const midR = 18;         // weight=1
  const blobExtra = 40;    // weight 1→2 확장

  const lineGap = rows * cellSize + 40; // 줄 간 간격

  /* DOM */
  const grid          = document.getElementById("grid");
  const textInput     = document.getElementById("textInput");
  const weightSlider  = document.getElementById("weightSlider");
  const spacingSlider = document.getElementById("spacingSlider");
  const weightLabel   = document.getElementById("weightLabel");
  const spacingLabel  = document.getElementById("spacingLabel");
  const svgCodeArea   = document.getElementById("svgCode");
  const exportSvgBtn  = document.getElementById("exportSvgBtn");

  /* ========== 도트 계산 (줄바꿈 포함) ========== */
  function computeDots() {
    // OS마다 줄바꿈이 \n, \r\n 섞여 있을 수 있어서 통일
    const raw = textInput.value.replace(/\r\n/g, "\n").replac
